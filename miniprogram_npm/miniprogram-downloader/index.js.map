{"version":3,"sources":["index.js","downloader.js","transform.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DOWNLOAD = void 0;\r\nvar miniprogram_network_life_cycle_1 = require(\"miniprogram-network-life-cycle\");\r\nObject.defineProperty(exports, \"CancelToken\", { enumerable: true, get: function () { return miniprogram_network_life_cycle_1.CancelToken; } });\r\nvar downloader_1 = require(\"./downloader\");\r\nObject.defineProperty(exports, \"Downloader\", { enumerable: true, get: function () { return downloader_1.Downloader; } });\r\nvar transform_1 = require(\"./transform\");\r\nObject.defineProperty(exports, \"transfomDownloadSendDefault\", { enumerable: true, get: function () { return transform_1.transfomDownloadSendDefault; } });\r\nObject.defineProperty(exports, \"transformDownloadResponseOkData\", { enumerable: true, get: function () { return transform_1.transformDownloadResponseOkData; } });\r\nvar downloader_2 = require(\"./downloader\");\r\n/**\r\n * 预定义全局Download\r\n */\r\n// tslint:disable-next-line: export-name\r\nexports.DOWNLOAD = new downloader_2.Downloader();\r\n//# sourceMappingURL=index.js.map","\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Downloader = void 0;\r\nvar miniprogram_network_life_cycle_1 = require(\"miniprogram-network-life-cycle\");\r\nvar transform_1 = require(\"./transform\");\r\n/**\r\n * 下载封装\r\n * @template T 扩展参数类型\r\n */\r\nvar Downloader = /** @class */ (function (_super) {\r\n    __extends(Downloader, _super);\r\n    /**\r\n     * 新建 Http实列\r\n     * @param config 全局默认配置\r\n     * @param downloader 下载处理方法，默认使用下载队列处理\r\n     * @param listeners 下载事件监听回调\r\n     */\r\n    function Downloader(config, downloader, listeners) {\r\n        return _super.call(this, \r\n        // tslint:disable-next-line: no-use-before-declare\r\n        downloader || wx.downloadFile, \r\n        // tslint:disable-next-line: no-object-literal-type-assertion\r\n        config || { transformSend: transform_1.transfomDownloadSendDefault }, listeners) || this;\r\n    }\r\n    Downloader.prototype.download = function () {\r\n        var isMultiParam = typeof arguments[0] === 'string';\r\n        // tslint:disable-next-line: no-unsafe-any\r\n        var options = isMultiParam ? (arguments[2] || {}) : arguments[0];\r\n        if (isMultiParam) {\r\n            options.url = arguments[0];\r\n            options.filePath = arguments[1];\r\n        }\r\n        return this.process(options);\r\n    };\r\n    return Downloader;\r\n}(miniprogram_network_life_cycle_1.LifeCycle));\r\nexports.Downloader = Downloader;\r\n//# sourceMappingURL=downloader.js.map","\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transformDownloadResponseOkData = exports.transfomDownloadSendDefault = void 0;\r\nvar miniprogram_network_utils_1 = require(\"miniprogram-network-utils\");\r\n/**\r\n * 默认下载请求参数构建方法\r\n * @param data - 完整配置参数\r\n */\r\nfunction transfomDownloadSendDefault(data) {\r\n    return miniprogram_network_utils_1.getCommonOptions({\r\n        url: miniprogram_network_utils_1.buildParams(data.url, data.params, data.baseURL),\r\n        header: data.headers\r\n    }, data, ['filePath']);\r\n}\r\nexports.transfomDownloadSendDefault = transfomDownloadSendDefault;\r\n/**\r\n * 正确返回返回数据处理方式\r\n * @param res - 返回结果\r\n * @param config - 完整参数\r\n */\r\nfunction transformDownloadResponseOkData(res, options) {\r\n    if (res.statusCode >= 200 && res.statusCode < 300) {\r\n        return res.tempFilePath;\r\n    }\r\n    throw res;\r\n}\r\nexports.transformDownloadResponseOkData = transformDownloadResponseOkData;\r\n//# sourceMappingURL=transform.js.map"]}